# +key means a required key
# ?key means a nullable key
# description comes after the # on the property definition
# $schema: http://json-schema.org/draft-07/schema#
# $id: https://index-egapro.travail.gouv.fr/schema.json
id: string
source: string
déclaration:
  date_déclaration: date-time # Date de validation et de transmission des résultats au service Egapro
  date_publication: date # Date de publication du niveau de résultat de l'entreprise ou de l'UES
  lien_publication: string
  index: integer
  +année_indicateurs: "2018:2019"
  +période_référence: [date, date] # Période de référence considérée pour le calcul des indicateurs
  date_consultation_CSE: string # Uniquement pour les modalités de calcul par niveau ou coefficient hiérarchique en application de la classification de branche ou d'une autre méthode de cotation des postes
  total_points: integer # Nombre total de points obtenus
  total_points_calculable: integer # Nombre total de points pouvant être obtenus
  mesures_correctives: mmo|me|mne # Mesures de corrections prévues à l'article D. 1142-5 / Trois items : Mesures mises en œuvre (mmo), Mesures envisagées (me), Mesures non envisagées (mne)"
  index: integer # Résultat final sur 100 points
effectif:
  total: number # Nombre de salariés pris en compte pour le calcul des indicateurs sur la période de référence
  tranche: "50:250|251:999|1000:" # Tranche d'effectifs de la structure
+declarant:
  +prénom: string
  +nom: string
  téléphone: string
  +email: email
+entreprise:
  +raison_sociale: string
  +siren: string
  region: string
  departement: string
  adresse: string
  commune: string
  # TODO regex ?
  code_postal: string
  code_naf: string
  +structure: simple|ues
  ues:
    raison_sociale: string
    entreprises:
      - raison_sociale: string
        siren: string
indicateurs:
  rémunérations:  # Indicateur 1 relatif à l'écart de rémunération entre les femmes et les hommes
    +mode: csp|coef|autre
    non_calculable: egvi40pcet|am # Deux items : Effectif des groupes valides inférieur à 40% de l'effectif total (egvi40pcet) ou Autre motif (am)
    motif_non_calculable: string
    resultat: number
    en_faveur_de: femmes|hommes|egalite
    note: integer # Nombre de points obtenus à l'indicateur 1 relatif à l'écart de rémunération entre les femmes et les hommes
    mesures_correction: boolean
    niveaux:
      - nom: string
        tranches:
          "<29": number
          "30>39": number
          "40>49": number
          "50>": number
  augmentations:  # Indicateur 2 relatif à l'écart de taux d'augmentations individuelles (hors promotion) entre les femmes et les homme
    non_calculable: egvi40pcet|am|absaugi # Trois items : Effectif des groupes valides inférieur à 40% de l'effectif total (egvi40pcet) ou Absence d'augmentations individuelles (absaugi) ou Autres motifs (am)
    motif_non_calculable: string # Précisions du "Autre motif"
    resultat: number
    en_faveur_de: femmes|hommes|egalite
    note: integer
    niveaux:
      - nom: string
        tranches:
          "<29": number
          "30>39": number
          "40>49": number
          "50>": number
  promotions: # Indicateur 3 relatif à l'écart de taux de promotions entre les femmes et les hommes
    non_calculable: egvi40pcet|egvinf40pcet|absprom|am
    motif_non_calculable: string
    resultat: number
    en_faveur_de: femmes|hommes|egalite
    note: integer
    niveaux:
      - nom: string
        tranches:
          "<29": number
          "30>39": number
          "40>49": number
          "50>": number
  congés_maternité: # Indicateur 4 relatif au pourcentage de salariées ayant bénéficié d'une augmentation dans l'année suivant leur retour de congé de maternité
    non_calculable: absrcm|absretcm|absaugpdtcm|absaugpdtcong|am
    motif_non_calculable: string
    resultat: number
    note: integer
    salariees_augmentees: integer
    salariees_augmentees_periode: integer
  hautes_rémunérations:  # Indicateur 5 relatif au nombre de salariés du sexe sous-représenté parmi les 10 salariés ayant perçu les plus hautes rémunérations
    non_calculable: egvi40pcet|am
    motif_non_calculable: string
    resultat: number
    en_faveur_de: femmes|hommes|egalite
    note: integer
    salaries_femmes: integer
    salaries_hommes: integer
